{"version":3,"file":"static/js/592.e8ba634b.chunk.js","mappings":"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","sources":["components/Home/Reviews.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport axiosInstance from \"../../axiosconfig\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport {\r\n  Box,\r\n  Typography,\r\n  LinearProgress,\r\n  Stack,\r\n  Avatar,\r\n  Rating,\r\n  Pagination,\r\n  Card,\r\n  CardContent,\r\n  Divider,\r\n  Container,\r\n  Grid\r\n} from \"@mui/material\";\r\nimport { deepOrange, deepPurple, teal, indigo, blueGrey } from \"@mui/material/colors\";\r\n\r\nconst Reviews = () => {\r\n  const { courseId } = useParams();\r\n  const [reviews, setReviews] = useState([]);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const reviewsPerPage = 5;\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [filterRating, setFilterRating] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const fetchReviews = async () => {\r\n      try {\r\n        const response = await axiosInstance.get(\r\n          `/api/reviews/course/${courseId}`\r\n        );\r\n\r\n        if (Array.isArray(response.data)) {\r\n          setReviews(response.data);\r\n          setError(null);\r\n        } else {\r\n          setReviews([]); // Handle empty or malformed\r\n        }\r\n      } catch (error) {\r\n         // Gracefully handle 404 (no reviews)\r\n         if (error.response && error.response.status === 404) {\r\n            setReviews([]);\r\n         } else {\r\n            console.error(\"Error fetching reviews:\", error);\r\n         }\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchReviews();\r\n  }, [courseId]);\r\n\r\n  // Calculations for Summary\r\n  const totalReviews = reviews.length;\r\n  const averageRating = totalReviews > 0\r\n    ? (reviews.reduce((acc, curr) => acc + curr.rating, 0) / totalReviews).toFixed(1)\r\n    : 0;\r\n\r\n  const ratingCounts = { 5: 0, 4: 0, 3: 0, 2: 0, 1: 0 };\r\n  reviews.forEach(r => {\r\n      if (ratingCounts[r.rating] !== undefined) ratingCounts[r.rating]++;\r\n  });\r\n\r\n  // Filter Logic\r\n  const filteredReviews = filterRating \r\n    ? reviews.filter(r => r.rating === filterRating)\r\n    : reviews;\r\n\r\n  // Pagination Logic\r\n  const pageCount = Math.ceil(filteredReviews.length / reviewsPerPage);\r\n  const displayedReviews = filteredReviews.slice(\r\n      (currentPage - 1) * reviewsPerPage,\r\n      currentPage * reviewsPerPage\r\n  );\r\n\r\n  const handlePageChange = (event, value) => {\r\n    setCurrentPage(value);\r\n  };\r\n\r\n  const getUserColor = (name) => {\r\n      const colors = [deepOrange[500], deepPurple[500], teal[500], indigo[500], blueGrey[500]];\r\n      let hash = 0;\r\n      for (let i = 0; i < name.length; i++) {\r\n          hash = name.charCodeAt(i) + ((hash << 5) - hash);\r\n      }\r\n      return colors[Math.abs(hash) % colors.length];\r\n  };\r\n\r\n  const formatDate = (dateString) => {\r\n    return new Date(dateString).toLocaleDateString(\"en-US\", {\r\n      year: \"numeric\",\r\n      month: \"long\",\r\n      day: \"numeric\",\r\n    });\r\n  };\r\n\r\n  if (loading) return <Typography sx={{py:4}}>Loading reviews...</Typography>;\r\n\r\n  return (\r\n    <Box id=\"reviews\" sx={{ py: 4 }}>\r\n      <Typography variant=\"h4\" fontWeight=\"bold\" gutterBottom>\r\n        Student Feedback\r\n      </Typography>\r\n\r\n      <Grid container spacing={6}>\r\n          {/* Summary Section */}\r\n          <Grid item xs={12} md={4}>\r\n              <Box sx={{ p: 0 }}>\r\n                  <Typography variant=\"h2\" fontWeight=\"800\" color=\"#b4690e\" sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\r\n                      {averageRating}\r\n                      <Typography variant=\"caption\" sx={{ fontSize: '1rem', color: 'text.secondary', fontWeight: 400 }}>\r\n                          course rating\r\n                      </Typography>\r\n                  </Typography>\r\n                  <Rating value={Number(averageRating)} precision={0.1} readOnly size=\"medium\" sx={{ mb: 2 }} />\r\n                  \r\n                  <Stack spacing={1}>\r\n                      {[5, 4, 3, 2, 1].map((star) => {\r\n                          const count = ratingCounts[star];\r\n                          const percent = totalReviews > 0 ? (count / totalReviews) * 100 : 0;\r\n                          return (\r\n                              <Box \r\n                                key={star} \r\n                                sx={{ \r\n                                    display: 'flex', \r\n                                    alignItems: 'center', \r\n                                    gap: 2, \r\n                                    cursor: 'pointer',\r\n                                    opacity: filterRating && filterRating !== star ? 0.4 : 1,\r\n                                    '&:hover': { opacity: 0.8 } \r\n                                }}\r\n                                onClick={() => setFilterRating(filterRating === star ? null : star)}\r\n                              >\r\n                                  <LinearProgress \r\n                                    variant=\"determinate\" \r\n                                    value={percent} \r\n                                    sx={{ \r\n                                        height: 8, \r\n                                        borderRadius: 4, \r\n                                        flexGrow: 1,\r\n                                        bgcolor: '#e0e0e0',\r\n                                        '& .MuiLinearProgress-bar': {\r\n                                            bgcolor: '#8a8a8a' \r\n                                        }\r\n                                    }} \r\n                                  />\r\n                                  <Rating value={star} count={5} readOnly size=\"small\" sx={{display: 'none'}} /> {/* Hidden literal stars for bar logic if needed, but using bar instead */}\r\n                                  <Box display=\"flex\" minWidth={80} justifyContent=\"space-between\">\r\n                                      <Rating value={star} max={5} readOnly size=\"small\" sx={{ fontSize: '1rem', color: '#b4690e', '& .MuiRating-iconEmpty': {display: 'none'} }} />\r\n                                      <Typography variant=\"body2\" color=\"text.secondary\" sx={{ml:1, minWidth: '30px', textAlign: 'right'}}>{Math.round(percent)}%</Typography>\r\n                                  </Box>\r\n                              </Box>\r\n                          );\r\n                      })}\r\n                  </Stack>\r\n                  {filterRating && (\r\n                      <Typography \r\n                        variant=\"body2\" \r\n                        color=\"primary\" \r\n                        sx={{ mt: 2, cursor: 'pointer', fontWeight: 'bold' }}\r\n                        onClick={() => setFilterRating(null)}\r\n                      >\r\n                          Clear Filter (Showing {filterRating} stars)\r\n                      </Typography> // Fix: properly clear filter\r\n                  )}\r\n              </Box>\r\n          </Grid>\r\n\r\n          {/* Reviews List */}\r\n          <Grid item xs={12} md={8}>\r\n              {displayedReviews.length > 0 ? (\r\n                  <Stack spacing={3}>\r\n                      {displayedReviews.map((review) => (\r\n                          <Box key={review.review_id}>\r\n                              <Divider sx={{ mb: 3 }} />\r\n                              <Box display=\"flex\" gap={2}>\r\n                                  <Avatar \r\n                                    sx={{ \r\n                                        bgcolor: getUserColor(review.user_name || \"U\"), \r\n                                        width: 48, \r\n                                        height: 48,\r\n                                        fontSize: '1.2rem'\r\n                                    }}\r\n                                  >\r\n                                      {(review.user_name || \"A\").charAt(0).toUpperCase()}\r\n                                  </Avatar>\r\n                                  <Box>\r\n                                      <Typography variant=\"subtitle1\" fontWeight=\"bold\">\r\n                                          {review.user_name || \"Anonymous User\"}\r\n                                      </Typography>\r\n                                      <Stack direction=\"row\" spacing={1} alignItems=\"center\" sx={{ mb: 1 }}>\r\n                                          <Rating value={review.rating} readOnly size=\"small\" sx={{ color: '#b4690e' }} />\r\n                                          <Typography variant=\"body2\" color=\"text.secondary\">\r\n                                              {formatDate(review.created_at)}\r\n                                          </Typography>\r\n                                      </Stack>\r\n                                      <Typography variant=\"body1\" color=\"#2d2f31\">\r\n                                          {review.comment}\r\n                                      </Typography>\r\n                                  </Box>\r\n                              </Box>\r\n                          </Box>\r\n                      ))}\r\n                      \r\n                      {pageCount > 1 && (\r\n                          <Box display=\"flex\" justifyContent=\"center\" mt={4}>\r\n                              <Pagination \r\n                                count={pageCount} \r\n                                page={currentPage} \r\n                                onChange={handlePageChange} \r\n                                color=\"primary\" \r\n                                shape=\"rounded\"\r\n                              />\r\n                          </Box>\r\n                      )}\r\n                  </Stack>\r\n              ) : (\r\n                  <Box sx={{ py: 4, textAlign: 'center' }}>\r\n                      <Typography variant=\"h6\" color=\"text.secondary\">\r\n                          No reviews found {filterRating ? `for ${filterRating} stars` : \"yet\"}.\r\n                      </Typography>\r\n                  </Box>\r\n              )}\r\n          </Grid>\r\n      </Grid>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default Reviews;\r\n"],"names":["Reviews","courseId","useParams","reviews","setReviews","useState","currentPage","setCurrentPage","loading","setLoading","error","setError","filterRating","setFilterRating","useEffect","async","response","axiosInstance","get","concat","Array","isArray","data","status","console","fetchReviews","totalReviews","length","averageRating","reduce","acc","curr","rating","toFixed","ratingCounts","forEach","r","undefined","filteredReviews","filter","pageCount","Math","ceil","displayedReviews","slice","getUserColor","name","colors","deepOrange","deepPurple","teal","indigo","blueGrey","hash","i","charCodeAt","abs","_jsx","Typography","sx","py","children","_jsxs","Box","id","variant","fontWeight","gutterBottom","Grid","container","spacing","item","xs","md","p","color","display","alignItems","gap","fontSize","Rating","value","Number","precision","readOnly","size","mb","Stack","map","star","count","percent","cursor","opacity","onClick","LinearProgress","height","borderRadius","flexGrow","bgcolor","minWidth","justifyContent","max","ml","textAlign","round","mt","review","Divider","Avatar","user_name","width","charAt","toUpperCase","direction","dateString","created_at","Date","toLocaleDateString","year","month","day","comment","review_id","Pagination","page","onChange","handlePageChange","event","shape"],"sourceRoot":""}