"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[592],{2592:(e,r,n)=>{n.r(r),n.d(r,{default:()=>b});var t=n(5043),s=n(4204),i=n(3216),a=n(4496),l=n(7353),o=n(8903),c=n(6682),d=n(8911),x=n(611),h=n(9336),u=n(1045),A=n(9135),g=n(6230),m=n(3326),p=n(9343),y=n(6232),j=n(2281),f=n(579);const b=()=>{const{courseId:e}=(0,i.g)(),[r,n]=(0,t.useState)([]),[b,v]=(0,t.useState)(1),[w,S]=(0,t.useState)(!0),[C,k]=(0,t.useState)(null),[z,W]=(0,t.useState)(null);(0,t.useEffect)((()=>{(async()=>{try{const r=await s.A.get("/api/reviews/course/".concat(e));Array.isArray(r.data)?(n(r.data),k(null)):n([])}catch(C){C.response&&404===C.response.status?n([]):console.error("Error fetching reviews:",C)}finally{S(!1)}})()}),[e]);const M=r.length,_=M>0?(r.reduce(((e,r)=>e+r.rating),0)/M).toFixed(1):0,E={5:0,4:0,3:0,2:0,1:0};r.forEach((e=>{void 0!==E[e.rating]&&E[e.rating]++}));const I=z?r.filter((e=>e.rating===z)):r,O=Math.ceil(I.length/5),U=I.slice(5*(b-1),5*b),F=e=>{const r=[g.A[500],m.A[500],p.A[500],y.A[500],j.A[500]];let n=0;for(let t=0;t<e.length;t++)n=e.charCodeAt(t)+((n<<5)-n);return r[Math.abs(n)%r.length]};return w?(0,f.jsx)(a.A,{sx:{py:4},children:"Loading reviews..."}):(0,f.jsxs)(l.A,{id:"reviews",sx:{py:4},children:[(0,f.jsx)(a.A,{variant:"h4",fontWeight:"bold",gutterBottom:!0,children:"Student Feedback"}),(0,f.jsxs)(o.Ay,{container:!0,spacing:6,children:[(0,f.jsx)(o.Ay,{item:!0,xs:12,md:4,children:(0,f.jsxs)(l.A,{sx:{p:0},children:[(0,f.jsxs)(a.A,{variant:"h2",fontWeight:"800",color:"#b4690e",sx:{display:"flex",alignItems:"center",gap:1},children:[_,(0,f.jsx)(a.A,{variant:"caption",sx:{fontSize:"1rem",color:"text.secondary",fontWeight:400},children:"course rating"})]}),(0,f.jsx)(c.A,{value:Number(_),precision:.1,readOnly:!0,size:"medium",sx:{mb:2}}),(0,f.jsx)(d.A,{spacing:1,children:[5,4,3,2,1].map((e=>{const r=E[e],n=M>0?r/M*100:0;return(0,f.jsxs)(l.A,{sx:{display:"flex",alignItems:"center",gap:2,cursor:"pointer",opacity:z&&z!==e?.4:1,"&:hover":{opacity:.8}},onClick:()=>W(z===e?null:e),children:[(0,f.jsx)(x.A,{variant:"determinate",value:n,sx:{height:8,borderRadius:4,flexGrow:1,bgcolor:"#e0e0e0","& .MuiLinearProgress-bar":{bgcolor:"#8a8a8a"}}}),(0,f.jsx)(c.A,{value:e,count:5,readOnly:!0,size:"small",sx:{display:"none"}})," ",(0,f.jsxs)(l.A,{display:"flex",minWidth:80,justifyContent:"space-between",children:[(0,f.jsx)(c.A,{value:e,max:5,readOnly:!0,size:"small",sx:{fontSize:"1rem",color:"#b4690e","& .MuiRating-iconEmpty":{display:"none"}}}),(0,f.jsxs)(a.A,{variant:"body2",color:"text.secondary",sx:{ml:1,minWidth:"30px",textAlign:"right"},children:[Math.round(n),"%"]})]})]},e)}))}),z&&(0,f.jsxs)(a.A,{variant:"body2",color:"primary",sx:{mt:2,cursor:"pointer",fontWeight:"bold"},onClick:()=>W(null),children:["Clear Filter (Showing ",z," stars)"]})]})}),(0,f.jsx)(o.Ay,{item:!0,xs:12,md:8,children:U.length>0?(0,f.jsxs)(d.A,{spacing:3,children:[U.map((e=>{return(0,f.jsxs)(l.A,{children:[(0,f.jsx)(h.A,{sx:{mb:3}}),(0,f.jsxs)(l.A,{display:"flex",gap:2,children:[(0,f.jsx)(u.A,{sx:{bgcolor:F(e.user_name||"U"),width:48,height:48,fontSize:"1.2rem"},children:(e.user_name||"A").charAt(0).toUpperCase()}),(0,f.jsxs)(l.A,{children:[(0,f.jsx)(a.A,{variant:"subtitle1",fontWeight:"bold",children:e.user_name||"Anonymous User"}),(0,f.jsxs)(d.A,{direction:"row",spacing:1,alignItems:"center",sx:{mb:1},children:[(0,f.jsx)(c.A,{value:e.rating,readOnly:!0,size:"small",sx:{color:"#b4690e"}}),(0,f.jsx)(a.A,{variant:"body2",color:"text.secondary",children:(r=e.created_at,new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}))})]}),(0,f.jsx)(a.A,{variant:"body1",color:"#2d2f31",children:e.comment})]})]})]},e.review_id);var r})),O>1&&(0,f.jsx)(l.A,{display:"flex",justifyContent:"center",mt:4,children:(0,f.jsx)(A.A,{count:O,page:b,onChange:(e,r)=>{v(r)},color:"primary",shape:"rounded"})})]}):(0,f.jsx)(l.A,{sx:{py:4,textAlign:"center"},children:(0,f.jsxs)(a.A,{variant:"h6",color:"text.secondary",children:["No reviews found ",z?"for ".concat(z," stars"):"yet","."]})})})]})]})}}}]);
//# sourceMappingURL=592.e8ba634b.chunk.js.map