"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[128],{1128:(e,r,s)=>{s.r(r),s.d(r,{default:()=>p});var t=s(9379),i=s(5043),a=s(3216),c=s(4204),n=s(6820),l=(s(4856),s(9029)),o=s(9304),d=s(9662),u=s(579);const h=(0,d.A)((0,u.jsx)("path",{d:"m14.06 9.02.92.92L5.92 19H5v-.92zM17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29m-3.6 3.19L3 17.25V21h3.75L17.81 9.94z"}),"EditOutlined"),g=(0,d.A)((0,u.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM8 9h8v10H8zm7.5-5-1-1h-5l-1 1H5v2h14V4z"}),"DeleteOutlineOutlined");var m=s(6485);const p=()=>{var e;const[r]=(0,n.A)(),s=(0,a.Zp)(),[d,p]=(0,i.useState)([]),[x,v]=(0,i.useState)({title:"",description:"",price:"",discount_price:"",image_url:"",category_id:"",level:"",language:""}),[j,_]=(0,i.useState)(null),[N,b]=(0,i.useState)(null),[A,C]=(0,i.useState)(null),[y,f]=(0,i.useState)([]),E=null===r||void 0===r||null===(e=r.user)||void 0===e?void 0:e.user_id;(0,i.useEffect)((()=>{E&&(S(),k())}),[r,E]);const S=()=>{c.A.get("/api/courses/instructor/".concat(E)).then((e=>p(e.data||[]))).catch((e=>{console.error("Error fetching courses:",e),p([])}))},k=()=>{c.A.get("/categories").then((e=>f(e.data))).catch((e=>console.error("Error fetching categories:",e)))},F=e=>{const{name:r,value:s}=e.target;v((0,t.A)((0,t.A)({},x),{},{[r]:s}))};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(o.A,{}),(0,u.jsxs)("div",{className:"instructor-dashboard",children:[(0,u.jsx)("h1",{className:"instructor-dashboard-heading",children:"Your Courses"}),(0,u.jsx)("div",{className:"",children:0===d.length?(0,u.jsx)("div",{className:"manage-no-course",children:(0,u.jsx)("h4",{children:"No courses found"})}):(0,u.jsx)("div",{className:"instructor-course-card-list",children:Array.isArray(d)&&d.map((e=>{var t;return(0,u.jsxs)("div",{className:"instructor-course-card",children:[(0,u.jsx)("img",{src:e.image_url,alt:e.title,className:"course-image"}),(0,u.jsxs)("div",{className:"instructor-card-items",children:[(0,u.jsxs)("span",{className:"title",children:[(0,u.jsx)("strong",{children:(null===e||void 0===e||null===(t=e.title)||void 0===t?void 0:t.length)>18?"".concat(e.title.substring(0,18),"..."):(null===e||void 0===e?void 0:e.title)||""}),(0,u.jsx)("button",{className:"instructor-course-edit-btn",onClick:()=>(e=>{_(e),v(e)})(e),children:(0,u.jsx)(h,{className:"editbtn"})})]}),(0,u.jsxs)("div",{className:"instructor-course-details",children:[(0,u.jsxs)("strong",{className:"rating",children:[void 0===e.average_rating||isNaN(Number(e.average_rating))?"N/A":0===Number(e.average_rating)?0:Number(e.average_rating).toFixed(1),(0,u.jsx)(l.A,{sx:{color:"orange",fontSize:20}})]}),(0,u.jsx)("span",{children:e.level}),(0,u.jsx)("span",{children:e.language})]}),(0,u.jsxs)("div",{className:"instructor-courses-btns",children:[(0,u.jsx)("button",{className:"instructor-course-delete-btn",onClick:()=>(async e=>{try{await c.A.delete("/api/courses/".concat(e),{data:{instructor_id:E},headers:{Authorization:"Bearer ".concat(r.token)}}),p(d.filter((r=>r.course_id!==e)))}catch(s){console.error("Error deleting course:",s)}})(e.course_id),children:(0,u.jsx)(g,{})}),(0,u.jsx)("button",{className:"instructor-course-other-btn",onClick:()=>s("/instructor/".concat(E,"/course/").concat(e.course_id,"/reviews"),{state:{courseTitle:e.title}}),children:"Reviews"}),(0,u.jsx)("button",{className:"instructor-course-other-btn",onClick:()=>s("/instructor/course/".concat(e.course_id,"/content"),{state:{courseName:e.title}}),children:"Manage Content"})]})]})]},e.course_id)}))})}),(0,u.jsxs)("div",{className:"instructor-course-edit",children:[(0,u.jsx)("h2",{children:j?"Edit Course":"Create New Course"}),(0,u.jsxs)("form",{className:"",onSubmit:j?e=>{e.preventDefault(),c.A.put("/api/courses/".concat(j.course_id),x).then((e=>{const r=d.map((e=>e.course_id===j.course_id?(0,t.A)((0,t.A)({},e),x):e));p(r),_(null),v({title:"",description:"",price:"",discount_price:"",image_url:"",category_id:"",level:"",language:""})})).catch((e=>console.error("Error updating course:",e)))}:e=>{e.preventDefault(),c.A.post("/api/courses",(0,t.A)((0,t.A)({},x),{},{instructor_id:E})).then((e=>{e.data&&e.data.course_id&&p((r=>[...r,e.data])),v({title:"",description:"",price:"",discount_price:"",image_url:"",category_id:"",level:"",language:""}),S()})).catch((e=>console.error("Error creating course:",e)))},children:[(0,u.jsxs)("div",{className:"",children:[(0,u.jsx)("label",{htmlFor:"title",children:"Title"}),(0,u.jsx)("input",{type:"text",id:"title",name:"title",value:x.title,onChange:F,required:!0})]}),(0,u.jsxs)("div",{className:"",children:[(0,u.jsx)("label",{htmlFor:"description",children:"Description"}),(0,u.jsx)("textarea",{id:"description",name:"description",value:x.description,onChange:F,required:!0})]}),(0,u.jsxs)("div",{className:"",children:[(0,u.jsx)("label",{htmlFor:"price",children:"Price"}),(0,u.jsx)("input",{type:"number",id:"price",name:"price",value:x.price,onChange:F,required:!0})]}),(0,u.jsxs)("div",{className:"",children:[(0,u.jsx)("label",{htmlFor:"discount_price",children:"Discount Price"}),(0,u.jsx)("input",{type:"number",id:"discount_price",name:"discount_price",value:x.discount_price,onChange:F})]}),(0,u.jsxs)("div",{className:"image-upload-courses-instructor",children:[(0,u.jsx)("input",{type:"file",onChange:e=>{b(e.target.files[0])},accept:"image/*"}),(0,u.jsx)("button",{onClick:async()=>{const e=new FormData;e.append("image",N);try{const r=(await c.A.post("/api/upload-image",e,{headers:{"Content-Type":"multipart/form-data"}})).data.imageUrl;C(r),v((e=>(0,t.A)((0,t.A)({},e),{},{image_url:r})))}catch(r){console.error("Error uploading image:",r)}},children:"Upload Image"}),A&&(0,u.jsxs)("div",{children:[(0,u.jsx)("h2",{children:"Uploaded Image:"}),(0,u.jsx)("img",{src:A,alt:"Uploaded",width:"300"})]})]}),(0,u.jsxs)("div",{className:"",children:[(0,u.jsx)("label",{htmlFor:"category_id",children:"Category"}),(0,u.jsxs)("select",{id:"category_id",name:"category_id",value:x.category_id,onChange:F,required:!0,children:[(0,u.jsx)("option",{value:"",disabled:!0,children:"Select a category"}),y.map((e=>(0,u.jsx)("option",{value:e.category_id,children:e.name},e.category_id)))]})]}),(0,u.jsxs)("div",{className:"",children:[(0,u.jsx)("label",{htmlFor:"level",children:"Level"}),(0,u.jsxs)("select",{id:"level",name:"level",value:x.level,onChange:F,required:!0,children:[(0,u.jsx)("option",{value:"",disabled:!0,children:"Select a level"}),(0,u.jsx)("option",{value:"beginner",children:"Beginner"}),(0,u.jsx)("option",{value:"intermediate",children:"Intermediate"}),(0,u.jsx)("option",{value:"advanced",children:"Advanced"})]})]}),(0,u.jsxs)("div",{className:"",children:[(0,u.jsx)("label",{htmlFor:"language",children:"Language"}),(0,u.jsxs)("select",{id:"language",name:"language",value:x.language,onChange:F,required:!0,children:[(0,u.jsx)("option",{value:"",disabled:!0,children:"Select a language"}),(0,u.jsx)("option",{value:"English",children:"English"}),(0,u.jsx)("option",{value:"Hindi",children:"Hindi"})]})]}),(0,u.jsx)("button",{type:"submit",children:j?"Update Course":"Create Course"})]})]})]}),(0,u.jsx)(m.A,{})]})}},9029:(e,r,s)=>{s.d(r,{A:()=>a});var t=s(9662),i=s(579);const a=(0,t.A)((0,i.jsx)("path",{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),"Grade")},4856:()=>{}}]);
//# sourceMappingURL=128.0142282e.chunk.js.map