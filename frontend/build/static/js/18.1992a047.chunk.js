"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[18],{6070:(e,t,r)=>{r.r(t),r.d(t,{default:()=>m});var s=r(5043),n=r(4204),c=r(5475),a=(r(8659),r(579));const l=e=>{let{course:t,userId:r}=e;const[l,o]=(0,s.useState)(0),[i,u]=(0,s.useState)(0),[d,h]=(0,s.useState)(""),[m,x]=(0,s.useState)(null);(0,s.useEffect)((()=>{(async()=>{try{const e=await n.A.get("/api/courses/".concat(t.course_id,"/enrollment-count"));o(e.data.enrollmentCount)}catch(e){console.error("Error fetching enrollment count:",e)}})(),(async()=>{try{const e=await n.A.get("/api/reviews/course/".concat(t.course_id,"/user/").concat(r));e.data.length>0&&x(e.data[0])}catch(e){console.error("Error fetching existing review:",e)}})()}),[t.course_id,r]);return(0,a.jsxs)("div",{className:"course-card enrollment-card",children:[(0,a.jsxs)(c.N_,{to:"/courses/".concat(t.course_id),className:"enrollment-card-link",style:{textDecoration:"none",color:"inherit"},children:[(0,a.jsx)("img",{src:t.image_url,alt:t.title,className:"course-image"}),(0,a.jsx)("h4",{children:t.title.length>24?"".concat(t.title.substring(0,24),"..."):t.title}),(0,a.jsxs)("p",{children:["Enrollments: ",l]}),(0,a.jsx)("button",{children:"Go to Course"})]},t.enrollment_id),m?(0,a.jsx)(a.Fragment,{}):(0,a.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{await n.A.post("/api/reviews",{user_id:r,course_id:t.course_id,rating:i,comment:d}),x({rating:i,comment:d})}catch(s){console.error("Error submitting review:",s)}},className:"review-form",children:[(0,a.jsxs)("label",{children:["Rating:",(0,a.jsxs)("select",{value:i,onChange:e=>u(Number(e.target.value)),children:[(0,a.jsx)("option",{value:0,children:"Select Rating"}),[1,2,3,4,5].map((e=>(0,a.jsx)("option",{value:e,children:e},e)))]})]}),(0,a.jsxs)("label",{children:["Comment:",(0,a.jsx)("textarea",{value:d,onChange:e=>h(e.target.value),placeholder:"Leave a comment"})]}),(0,a.jsx)("button",{type:"submit",children:"Submit Review"})]})]})};var o=r(9722),i=r(6820),u=r(9304),d=r(6485);const h=r.p+"static/media/we.0af7f82bcc3fa56a6833.png",m=()=>{var e;const[t]=(0,i.A)(),[r,n]=(0,s.useState)([]),[c,m]=(0,s.useState)(!0),[x,g]=(0,s.useState)(null),v=null===t||void 0===t||null===(e=t.user)||void 0===e?void 0:e.user_id;return(0,s.useEffect)((()=>{(async()=>{if(v)try{const e=null===t||void 0===t?void 0:t.token,r=await o.A.get("http://localhost:8080/api/enrollments/user/".concat(v),{headers:{Authorization:"Bearer ".concat(e)}});n(r.data)}catch(e){console.error("Error fetching enrolled courses:",e),g("Error fetching enrolled courses")}finally{m(!1)}})()}),[v,t]),c?(0,a.jsx)("p",{children:"Loading..."}):x?(0,a.jsx)("p",{children:x}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.A,{}),(0,a.jsxs)("div",{className:"enrollment-courses-page",children:[(0,a.jsx)("h2",{children:"My Enrolled Courses"}),0===r.length?(0,a.jsx)("div",{className:"no-content-student",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("img",{src:h,style:{width:"300px",height:"200px",position:"relative",right:"50px"},alt:"No content available"}),(0,a.jsx)("p",{children:"You are not enrolled in any course."})]})}):(0,a.jsx)("div",{className:"course-list",children:r.map((e=>(0,a.jsx)(l,{course:e,userId:v},e.enrollment_id)))})]}),(0,a.jsx)(d.A,{})]})}}}]);
//# sourceMappingURL=18.1992a047.chunk.js.map