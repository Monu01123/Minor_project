"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[781],{6455:(e,t,r)=>{r.r(t),r.d(t,{default:()=>N});var o,n=r(5043),i=r(9722),s=r(6820),a=r(9304),c="https://js.stripe.com/v3",l=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,d="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",u=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",r=document.createElement("script");r.src="".concat(c).concat(t);var o=document.head||document.body;if(!o)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return o.appendChild(r),r},h=null,p=null,m=null,x=function(e){return null!==h?h:(h=new Promise((function(t,r){if("undefined"!==typeof window&&"undefined"!==typeof document)if(window.Stripe&&e&&console.warn(d),window.Stripe)t(window.Stripe);else try{var o=function(){for(var e=document.querySelectorAll('script[src^="'.concat(c,'"]')),t=0;t<e.length;t++){var r=e[t];if(l.test(r.src))return r}return null}();if(o&&e)console.warn(d);else if(o){if(o&&null!==m&&null!==p){var n;o.removeEventListener("load",m),o.removeEventListener("error",p),null===(n=o.parentNode)||void 0===n||n.removeChild(o),o=u(e)}}else o=u(e);m=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}}(t,r),p=function(e){return function(){e(new Error("Failed to load Stripe.js"))}}(r),o.addEventListener("load",m),o.addEventListener("error",p)}catch(i){return void r(i)}else t(null)}))).catch((function(e){return h=null,Promise.reject(e)}))},v=!1,f=function(){return o||(o=x(null).catch((function(e){return o=null,Promise.reject(e)})))};Promise.resolve().then((function(){return f()})).catch((function(e){v||console.warn(e)}));var A=r(912),g=r(5563),j=r(6485),y=r(9252),w=r(4496),b=r(7353),C=r(1906),_=r(8903),S=r(8911),k=r(2110),M=r(6591),E=r(9336),I=r(349),W=r(7466),R=r(3216),z=r(5475);r.p;var F=r(579);const B=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];v=!0;var o=Date.now();return f().then((function(e){return function(e,t,r){if(null===e)return null;var o=e.apply(void 0,t);return function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"4.6.0",startTime:t})}(o,r),o}(e,t,o)}))}("pk_test_51MiCn5SCTwSZDv2RQSoCBZEhWYnhCpG7Yi90uqZm6mTFi2KE2Sp2VNLgrZgjidU209nlFv6qS26GjrIVnCbOQ2eA00bdSwIX1F"),N=()=>{const{updateCartCount:e}=(0,A._)(),{updateWishlistCount:t}=(0,g.n)(),[r,o]=(0,n.useState)([]),[c,l]=(0,n.useState)(0),[d,u]=(0,n.useState)(0),[h,p]=(0,n.useState)(!1),[m]=(0,s.A)();(0,R.Zp)();(0,n.useEffect)((()=>{(async()=>{p(!0);try{var e;const t=null===m||void 0===m||null===(e=m.user)||void 0===e?void 0:e.user_id,r=null===m||void 0===m?void 0:m.token;if(!t)return;const n=await i.A.get("http://localhost:8080/api/cart/user/".concat(t),{headers:{Authorization:"Bearer ".concat(r)}});Array.isArray(n.data)&&(o(n.data),x(n.data))}catch(t){console.error("Error fetching cart items:",t)}finally{p(!1)}})()}),[m]);const x=e=>{let t=0,r=0;e.forEach((e=>{const o=Math.round(e.price),n=e.discount_price?Math.round(e.discount_price):o;t+=n,r+=o-n})),l(t),u(r)},v=async t=>{const n=null===m||void 0===m?void 0:m.token;try{await i.A.delete("http://localhost:8080/api/cart/item/".concat(t),{headers:{Authorization:"Bearer ".concat(n)}});const s=r.filter((e=>e.cart_item_id!==t));o(s),x(s),await(async()=>{if(null!==m&&void 0!==m&&m.user)try{const t=await i.A.get("http://localhost:8080/api/cart/count/".concat(m.user.user_id));e(t.data.count||0)}catch(t){console.error(t)}})()}catch(s){console.error("Error removing course from cart:",s)}};return h?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(a.A,{}),(0,F.jsx)(y.A,{sx:{py:10,textAlign:"center"},children:(0,F.jsx)(w.A,{children:"Loading Cart..."})}),(0,F.jsx)(j.A,{})]}):(0,F.jsxs)(b.A,{sx:{bgcolor:"#f5f7fa",minHeight:"100vh",display:"flex",flexDirection:"column"},children:[(0,F.jsx)(a.A,{}),(0,F.jsxs)(y.A,{maxWidth:"lg",sx:{py:6,flexGrow:1},children:[(0,F.jsx)(w.A,{variant:"h4",fontWeight:"800",sx:{mb:4},children:"Shopping Cart"}),0===r.length?(0,F.jsxs)(b.A,{sx:{textAlign:"center",py:8},children:[(0,F.jsx)(b.A,{component:"img",src:"https://img.freepik.com/free-vector/shopping-cart-illustration_1284-8069.jpg?w=740&t=st=1686734120~exp=1686734720~hmac=...",alt:"Empty Cart",sx:{width:200,mb:3,opacity:.8}}),(0,F.jsx)(w.A,{variant:"h5",color:"text.secondary",gutterBottom:!0,children:"Your cart is empty"}),(0,F.jsx)(C.A,{variant:"contained",component:z.N_,to:"/",sx:{mt:2,bgcolor:"#a435f0","&:hover":{bgcolor:"#8710d8"}},children:"Keep Shopping"})]}):(0,F.jsxs)(_.Ay,{container:!0,spacing:4,children:[(0,F.jsxs)(_.Ay,{item:!0,xs:12,md:8,children:[(0,F.jsxs)(w.A,{variant:"h6",fontWeight:"bold",sx:{mb:2},children:[r.length," Course",r.length>1?"s":""," in Cart"]}),(0,F.jsx)(S.A,{spacing:2,children:r.map((e=>(0,F.jsxs)(k.A,{sx:{display:"flex",p:1,borderRadius:2,boxShadow:"0 2px 8px rgba(0,0,0,0.05)",border:"1px solid #e0e0e0"},children:[(0,F.jsx)(M.A,{component:"img",sx:{width:120,height:80,borderRadius:1,objectFit:"cover"},image:e.image_url,alt:e.course_title}),(0,F.jsxs)(b.A,{sx:{display:"flex",flexDirection:"column",flexGrow:1,ml:2,justifyContent:"space-between"},children:[(0,F.jsxs)(b.A,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",children:[(0,F.jsxs)(b.A,{children:[(0,F.jsx)(w.A,{variant:"subtitle1",fontWeight:"bold",sx:{lineHeight:1.2},children:e.course_title}),(0,F.jsxs)(w.A,{variant:"caption",color:"text.secondary",children:["By ",e.instructor_name||"Instructor"]})]}),(0,F.jsxs)(b.A,{textAlign:"right",children:[(0,F.jsxs)(w.A,{variant:"h6",color:"#a435f0",fontWeight:"bold",children:["\u20b9",Math.round(e.discount_price||e.price)]}),e.discount_price&&(0,F.jsxs)(w.A,{variant:"caption",sx:{textDecoration:"line-through",color:"text.secondary"},children:["\u20b9",Math.round(e.price)]})]})]}),(0,F.jsxs)(b.A,{display:"flex",justifyContent:"flex-end",gap:1,mt:1,children:[(0,F.jsx)(C.A,{size:"small",startIcon:(0,F.jsx)(I.A,{}),onClick:()=>v(e.cart_item_id),sx:{color:"#d32f2f",textTransform:"none"},children:"Remove"}),(0,F.jsx)(C.A,{size:"small",startIcon:(0,F.jsx)(W.A,{}),onClick:()=>(async(e,r)=>{var o;const n=null===m||void 0===m||null===(o=m.user)||void 0===o?void 0:o.user_id,s=null===m||void 0===m?void 0:m.token;try{await i.A.post("http://localhost:8080/api/wishlist",{user_id:n,course_id:e},{headers:{Authorization:"Bearer ".concat(s)}}),await v(r);const o=await i.A.get("http://localhost:8080/api/wishlist/count/".concat(n));t(o.data.wishlist_count||0)}catch(a){console.error("Error moving course to wishlist:",a)}})(e.course_id,e.cart_item_id),sx:{color:"#1976d2",textTransform:"none"},children:"Move to Wishlist"})]})]})]},e.cart_item_id)))})]}),(0,F.jsx)(_.Ay,{item:!0,xs:12,md:4,children:(0,F.jsxs)(b.A,{sx:{position:{md:"sticky"},top:100},children:[(0,F.jsx)(w.A,{variant:"h6",fontWeight:"bold",sx:{mb:2,color:"text.secondary"},children:"Total:"}),(0,F.jsxs)(b.A,{sx:{bgcolor:"white",p:3,borderRadius:2,boxShadow:"0 4px 12px rgba(0,0,0,0.1)",border:"1px solid #e0e0e0"},children:[(0,F.jsxs)(w.A,{variant:"h3",fontWeight:"bold",sx:{mb:1},children:["\u20b9",c]}),d>0&&(0,F.jsxs)(w.A,{variant:"body1",sx:{color:"text.secondary",textDecoration:"line-through"},children:["\u20b9",c+d]}),d>0&&(0,F.jsxs)(w.A,{variant:"body2",sx:{color:"#2e7d32",mb:3},children:["You saved \u20b9",d,"!"]}),(0,F.jsx)(C.A,{variant:"contained",fullWidth:!0,size:"large",onClick:async()=>{try{var e;const t=null===m||void 0===m||null===(e=m.user)||void 0===e?void 0:e.user_id;if(!t)return void alert("Please log in to proceed with the checkout.");const o=r.map((e=>({name:e.course_title,price:e.discount_price?e.discount_price:e.price,quantity:1,courseId:e.course_id}))),n=r.map((e=>e.course_id)).join(","),s=null===m||void 0===m?void 0:m.token,a=await i.A.post("http://localhost:8080/create-checkout-session",{items:o,userId:t,courseIds:n},{headers:{Authorization:"Bearer ".concat(s)}}),{sessionId:c}=a.data,l=await B,{error:d}=await l.redirectToCheckout({sessionId:c});d&&alert("Error during checkout: "+d.message)}catch(t){console.error("Error during checkout:",t),alert("Error during checkout: "+t.message)}},sx:{bgcolor:"#a435f0",py:1.5,fontWeight:"bold",fontSize:"1.1rem","&:hover":{bgcolor:"#8710d8"}},children:"Checkout"}),(0,F.jsx)(E.A,{sx:{my:3}}),(0,F.jsx)(w.A,{variant:"h6",fontWeight:"bold",gutterBottom:!0,children:"Promotions"}),(0,F.jsxs)(b.A,{display:"flex",border:"1px solid #ccc",borderRadius:1,overflow:"hidden",children:[(0,F.jsx)(b.A,{component:"input",placeholder:"Enter Coupon",sx:{border:"none",p:1.5,flexGrow:1,outline:"none"}}),(0,F.jsx)(C.A,{sx:{borderRadius:0,bgcolor:"#2d2f31",color:"white","&:hover":{bgcolor:"black"}},children:"Apply"})]})]})]})})]})]}),(0,F.jsx)(j.A,{})]})}},349:(e,t,r)=>{r.d(t,{A:()=>i});var o=r(9662),n=r(579);const i=(0,o.A)((0,n.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM8 9h8v10H8zm7.5-5-1-1h-5l-1 1H5v2h14V4z"}),"DeleteOutline")},7466:(e,t,r)=>{r.d(t,{A:()=>i});var o=r(9662),n=r(579);const i=(0,o.A)((0,n.jsx)("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3m-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05"}),"FavoriteBorder")},6591:(e,t,r)=>{r.d(t,{A:()=>A});var o=r(9379),n=r(45),i=r(5043),s=r(8387),a=r(8610),c=r(4535),l=r(6431),d=r(2532),u=r(2372);function h(e){return(0,u.Ay)("MuiCardMedia",e)}(0,d.A)("MuiCardMedia",["root","media","img"]);var p=r(579);const m=["children","className","component","image","src","style"],x=(0,c.Ay)("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e,{isMediaComponent:o,isImageComponent:n}=r;return[t.root,o&&t.media,n&&t.img]}})({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center",variants:[{props:{isMediaComponent:!0},style:{width:"100%"}},{props:{isImageComponent:!0},style:{objectFit:"cover"}}]}),v=["video","audio","picture","iframe","img"],f=["picture","img"],A=i.forwardRef((function(e,t){const r=(0,l.b)({props:e,name:"MuiCardMedia"}),{children:i,className:c,component:d="div",image:u,src:A,style:g}=r,j=(0,n.A)(r,m),y=v.includes(d),w=!y&&u?(0,o.A)({backgroundImage:'url("'.concat(u,'")')},g):g,b=(0,o.A)((0,o.A)({},r),{},{component:d,isMediaComponent:y,isImageComponent:f.includes(d)}),C=(e=>{const{classes:t,isMediaComponent:r,isImageComponent:o}=e,n={root:["root",r&&"media",o&&"img"]};return(0,a.A)(n,h,t)})(b);return(0,p.jsx)(x,(0,o.A)((0,o.A)({className:(0,s.A)(C.root,c),as:d,role:!y&&u?"img":void 0,ref:t,style:w,ownerState:b,src:y?u||A:void 0},j),{},{children:i}))}))},2110:(e,t,r)=>{r.d(t,{A:()=>f});var o=r(9379),n=r(45),i=r(5043),s=r(8387),a=r(8610),c=r(4535),l=r(6431),d=r(1596),u=r(2532),h=r(2372);function p(e){return(0,h.Ay)("MuiCard",e)}(0,u.A)("MuiCard",["root"]);var m=r(579);const x=["className","raised"],v=(0,c.Ay)(d.A,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})({overflow:"hidden"}),f=i.forwardRef((function(e,t){const r=(0,l.b)({props:e,name:"MuiCard"}),{className:i,raised:c=!1}=r,d=(0,n.A)(r,x),u=(0,o.A)((0,o.A)({},r),{},{raised:c}),h=(e=>{const{classes:t}=e;return(0,a.A)({root:["root"]},p,t)})(u);return(0,m.jsx)(v,(0,o.A)({className:(0,s.A)(h.root,i),elevation:c?8:void 0,ref:t,ownerState:u},d))}))}}]);
//# sourceMappingURL=781.d819befe.chunk.js.map