"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[406],{9025:(t,e,s)=>{s.r(e),s.d(e,{default:()=>k});var i=s(5043),o=s(9722),r=s(6820),n=s(9304),a=s(5563),l=s(912),c=s(6485),d=s(9252),h=s(8903),x=s(8185),u=s(7353),p=s(4496),A=s(1906),m=s(2110),v=s(6591),g=s(8483),j=s(7392),f=s(6494),b=s(349),w=s(5084),y=s(5475),_=s(579);const k=()=>{const{updateWishlistCount:t}=(0,a.n)(),{updateCartCount:e}=(0,l._)(),[s,k]=(0,i.useState)([]),[z,C]=(0,i.useState)(!0),[W]=(0,r.A)();(0,i.useEffect)((()=>{W&&W.user&&(async()=>{C(!0);try{var t;const e=null===W||void 0===W||null===(t=W.user)||void 0===t?void 0:t.user_id,s=null===W||void 0===W?void 0:W.token;if(!e)return;const i=await o.A.get("http://localhost:8080/api/wishlist/user/".concat(e),{headers:{Authorization:"Bearer ".concat(s)}});Array.isArray(i.data)?k(i.data):k([])}catch(e){e.response&&404===e.response.status?k([]):console.error("Error fetching wishlist items:",e)}finally{C(!1)}})()}),[W]);const B=async e=>{try{var i;const r=null===W||void 0===W?void 0:W.token;await o.A.delete("http://localhost:8080/api/wishlist/user/".concat(e),{headers:{Authorization:"Bearer ".concat(r)}});const n=s.filter((t=>t.wishlist_id!==e));k(n);const a=null===W||void 0===W||null===(i=W.user)||void 0===i?void 0:i.user_id,l=await o.A.get("http://localhost:8080/api/wishlist/count/".concat(a));t(l.data.wishlist_count||0)}catch(r){console.error("Error removing course from wishlist:",r)}};return z?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(n.A,{}),(0,_.jsx)(d.A,{sx:{py:8},children:(0,_.jsx)(h.Ay,{container:!0,spacing:3,children:[1,2,3,4].map((t=>(0,_.jsxs)(h.Ay,{item:!0,xs:12,sm:6,md:3,children:[(0,_.jsx)(x.A,{variant:"rectangular",height:200,sx:{borderRadius:2,mb:1}}),(0,_.jsx)(x.A,{width:"80%"}),(0,_.jsx)(x.A,{width:"60%"})]},t)))})}),(0,_.jsx)(c.A,{})]}):(0,_.jsxs)(u.A,{sx:{bgcolor:"#F7F9FA",minHeight:"100vh",display:"flex",flexDirection:"column"},children:[(0,_.jsx)(n.A,{}),(0,_.jsxs)(d.A,{maxWidth:"xl",sx:{py:6,flexGrow:1},children:[(0,_.jsx)(p.A,{variant:"h4",fontWeight:"800",sx:{mb:4},children:"My Wishlist"}),0===s.length?(0,_.jsxs)(u.A,{sx:{textAlign:"center",py:10,bgcolor:"white",borderRadius:4,boxShadow:"0 4px 12px rgba(0,0,0,0.05)"},children:[(0,_.jsx)(u.A,{sx:{fontSize:"4rem",mb:2},children:"\u2764\ufe0f"}),(0,_.jsx)(p.A,{variant:"h5",color:"text.secondary",gutterBottom:!0,children:"Your wishlist is empty."}),(0,_.jsx)(p.A,{variant:"body1",color:"text.secondary",sx:{mb:4},children:"Explore more courses and save them for later!"}),(0,_.jsx)(A.A,{variant:"outlined",component:y.N_,to:"/",sx:{fontWeight:"bold",border:"2px solid"},children:"Browse Courses"})]}):(0,_.jsx)(h.Ay,{container:!0,spacing:3,children:s.map((t=>(0,_.jsx)(h.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,_.jsxs)(m.A,{sx:{height:"100%",display:"flex",flexDirection:"column",borderRadius:2,transition:"all 0.3s ease","&:hover":{transform:"translateY(-4px)",boxShadow:"0 8px 24px rgba(0,0,0,0.1)"}},children:[(0,_.jsxs)(u.A,{sx:{position:"relative"},children:[(0,_.jsx)(v.A,{component:"img",height:"160",image:t.image_url,alt:t.course_title}),(0,_.jsx)(g.A,{title:"Remove from Wishlist",children:(0,_.jsx)(j.A,{size:"small",onClick:()=>B(t.wishlist_id),sx:{position:"absolute",top:8,right:8,bgcolor:"rgba(255,255,255,0.9)",color:"#d32f2f","&:hover":{bgcolor:"white"}},children:(0,_.jsx)(b.A,{fontSize:"small"})})})]}),(0,_.jsxs)(f.A,{sx:{flexGrow:1,p:2},children:[(0,_.jsx)(p.A,{variant:"subtitle1",fontWeight:"bold",sx:{lineHeight:1.3,mb:1,minHeight:"2.6em",overflow:"hidden"},children:t.course_title}),(0,_.jsxs)(p.A,{variant:"body2",color:"text.secondary",sx:{mb:2},children:["By ",t.instructor_name||"Instructor"]}),(0,_.jsxs)(u.A,{display:"flex",alignItems:"baseline",gap:1,children:[(0,_.jsxs)(p.A,{variant:"h6",fontWeight:"bold",color:"#a435f0",children:["\u20b9",Math.round(t.discount_price||t.price)]}),t.discount_price&&(0,_.jsxs)(p.A,{variant:"caption",sx:{textDecoration:"line-through",color:"text.secondary"},children:["\u20b9",Math.round(t.price)]})]})]}),(0,_.jsx)(A.A,{fullWidth:!0,variant:"contained",startIcon:(0,_.jsx)(w.A,{}),onClick:()=>(async t=>{try{var s;const i=null===W||void 0===W||null===(s=W.user)||void 0===s?void 0:s.user_id,r=null===W||void 0===W?void 0:W.token;await o.A.post("http://localhost:8080/api/cart",{user_id:i,course_id:t.course_id},{headers:{Authorization:"Bearer ".concat(r)}}),await B(t.wishlist_id);const n=await o.A.get("http://localhost:8080/api/cart/count/".concat(i));e(n.data.count||0)}catch(i){console.error("Error moving course to cart:",i)}})(t),sx:{bgcolor:"white",color:"#2d2f31",borderTop:"1px solid #e0e0e0",borderRadius:0,py:1.5,"&:hover":{bgcolor:"#f5f5f5"}},children:"Move to Cart"})]})},t.wishlist_id)))})]}),(0,_.jsx)(c.A,{})]})}},349:(t,e,s)=>{s.d(e,{A:()=>r});var i=s(9662),o=s(579);const r=(0,i.A)((0,o.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM8 9h8v10H8zm7.5-5-1-1h-5l-1 1H5v2h14V4z"}),"DeleteOutline")}}]);
//# sourceMappingURL=406.7e168a99.chunk.js.map