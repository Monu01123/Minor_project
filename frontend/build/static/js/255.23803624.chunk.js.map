{"version":3,"file":"static/js/255.23803624.chunk.js","mappings":"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","sources":["../node_modules/@mui/icons-material/esm/Edit.js","components/instructor/ManageCourseContent.js","../node_modules/@mui/icons-material/esm/Delete.js"],"sourcesContent":["\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z\"\n}), 'Edit');","import React, { useState, useEffect } from \"react\";\r\nimport axiosInstance from \"../../axiosconfig\";\r\nimport { useParams, useLocation } from \"react-router-dom\";\r\nimport Navbar from \"../Home/NavBar\";\r\nimport \"./dashboard.css\";\r\nimport DeleteIcon from \"@mui/icons-material/Delete\";\r\nimport EditIcon from \"@mui/icons-material/Edit\";\r\nimport Footer from \"../Home/Footer.js\";\r\n\r\nconst ManageCourseContent = () => {\r\n  const { courseId } = useParams();\r\n  const [courseContent, setCourseContent] = useState([]);\r\n  const location = useLocation();\r\n  const [courseName, setCourseName] = useState(\r\n    location.state?.courseName || \"\"\r\n  );\r\n  const [newContent, setNewContent] = useState({\r\n    title: \"\",\r\n    content_type: \"video\",\r\n    content_url: \"\",\r\n    content_text: \"\",\r\n    duration: \"\",\r\n    content_order: 0,\r\n  });\r\n  const [editingContent, setEditingContent] = useState(null);\r\n  const [videoFile, setVideoFile] = useState(null);\r\n  const [isUploading, setIsUploading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    fetchCourseContent();\r\n    if (!courseName) {\r\n      fetchCourseDetails();\r\n    }\r\n     // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [courseId, courseName]);\r\n\r\n  const handleFileChange = (event) => {\r\n    setVideoFile(event.target.files[0]);\r\n  };\r\n\r\n  const fetchCourseContent = async () => {\r\n    try {\r\n      const response = await axiosInstance.get(`/api/content/${courseId}`);\r\n      const contentData = response.data;\r\n      setCourseContent(contentData);\r\n\r\n      if (contentData.length > 0) {\r\n        const maxOrder = Math.max(\r\n          ...contentData.map((item) => item.content_order)\r\n        );\r\n        setNewContent((prev) => ({ ...prev, content_order: maxOrder + 1 }));\r\n      } else {\r\n        setNewContent((prev) => ({ ...prev, content_order: 1 }));\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error fetching content:\", error);\r\n    }\r\n  };\r\n\r\n  const fetchCourseDetails = async () => {\r\n    try {\r\n      const response = await axiosInstance.get(`/api/courses/${courseId}`);\r\n      setCourseName(response.data.name);\r\n    } catch (error) {\r\n      console.error(\"Error fetching course details:\", error);\r\n    }\r\n  };\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setNewContent({ ...newContent, [name]: value });\r\n  };\r\n\r\n  const handleUpload = async () => {\r\n    if (!videoFile) return;\r\n    setIsUploading(true);\r\n\r\n    const formData = new FormData();\r\n    formData.append(\"video\", videoFile);\r\n\r\n    try {\r\n      const response = await axiosInstance.post(\"/api/upload\", formData, {\r\n        headers: {\r\n          \"Content-Type\": \"multipart/form-data\",\r\n        },\r\n      });\r\n      setNewContent((prev) => ({\r\n        ...prev,\r\n        content_url: response.data.videoUrl,\r\n      }));\r\n      setIsUploading(false);\r\n    } catch (error) {\r\n      console.error(\"Error uploading video:\", error);\r\n      setIsUploading(false);\r\n    }\r\n  };\r\n\r\n  const createContent = async (e) => {\r\n    e.preventDefault();\r\n    if (!newContent.content_url) {\r\n      alert(\"Please upload the video first.\");\r\n      return;\r\n    }\r\n\r\n    const contentData = { ...newContent, course_id: courseId };\r\n\r\n    try {\r\n      await axiosInstance.post(\"/api/content\", contentData);\r\n      fetchCourseContent();\r\n      resetForm();\r\n    } catch (error) {\r\n      console.error(\"Error creating content:\", error);\r\n    }\r\n  };\r\n\r\n  const updateContent = async (e) => {\r\n    e.preventDefault();\r\n    if (!newContent.content_url) {\r\n      alert(\"Please upload a new video for the update.\");\r\n      return;\r\n    }\r\n\r\n    const updatedContentData = {\r\n      ...newContent,\r\n    };\r\n\r\n    try {\r\n      await axiosInstance.put(\r\n        `/api/content/${editingContent.content_id}`,\r\n        updatedContentData\r\n      );\r\n      fetchCourseContent();\r\n      resetForm();\r\n    } catch (error) {\r\n      console.error(\"Error updating content:\", error);\r\n    }\r\n  };\r\n\r\n  const deleteContent = async (contentId) => {\r\n    try {\r\n      await axiosInstance.delete(`/api/content/${contentId}`);\r\n      fetchCourseContent();\r\n    } catch (error) {\r\n      console.error(\"Error deleting content:\", error);\r\n    }\r\n  };\r\n\r\n  const editContent = (content) => {\r\n    setEditingContent(content);\r\n    setNewContent(content);\r\n  };\r\n\r\n  const resetForm = () => {\r\n    setEditingContent(null);\r\n    setNewContent({\r\n      title: \"\",\r\n      content_type: \"\",\r\n      content_url: \"\",\r\n      content_text: \"\",\r\n      duration: \"\",\r\n      content_order: 0,\r\n    });\r\n    setVideoFile(null);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Navbar />\r\n      <div className=\"manage-course-content\">\r\n        <h1 className=\"title\">\r\n          Manage Course Content for:\r\n          <br /> <h6>{courseName}</h6>\r\n        </h1>\r\n        <div>\r\n          <section className=\"content-list first-section\">\r\n            <h2>Content List</h2>\r\n            <ul>\r\n              {courseContent.length === 0 ? (\r\n                <p style={{textAlign:\"center\"}}>\r\n                  No course content found for this course.\r\n                </p>\r\n              ) : (\r\n                <>\r\n                  {courseContent.map((content) => (\r\n                    <li\r\n                      key={content.content_id}\r\n                      className=\"instructor-content-item\"\r\n                    >\r\n                      <h3>{content.title}</h3>\r\n                      <div>\r\n                        <button\r\n                          onClick={() => editContent(content)}\r\n                          className=\"instructor-edit-btn\"\r\n                        >\r\n                          <EditIcon />\r\n                        </button>\r\n                        <button\r\n                          onClick={() => deleteContent(content.content_id)}\r\n                          className=\"instructor-delete-btn\"\r\n                        >\r\n                          <DeleteIcon />\r\n                        </button>\r\n                      </div>\r\n                    </li>\r\n                  ))}\r\n                </>\r\n              )}\r\n            </ul>\r\n          </section>\r\n\r\n          <section className=\"form-section instructor-course-edit\">\r\n            <h2>{editingContent ? \"Edit Content\" : \"Add New Content\"}</h2>\r\n            <form\r\n              onSubmit={editingContent ? updateContent : createContent}\r\n              className=\"content-form\"\r\n            >\r\n              <input\r\n                type=\"text\"\r\n                name=\"title\"\r\n                placeholder=\"Title\"\r\n                value={newContent.title}\r\n                onChange={handleInputChange}\r\n                required\r\n              />\r\n              <input\r\n                type=\"text\"\r\n                name=\"content_type\"\r\n                placeholder=\"Content Type\"\r\n                value={newContent.content_type}\r\n                onChange={handleInputChange}\r\n                readOnly\r\n              />\r\n\r\n              <div className=\"file-upload image-upload-courses-instructor\">\r\n                <input\r\n                  type=\"file\"\r\n                  onChange={handleFileChange}\r\n                  accept=\"video/*\"\r\n                />\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={handleUpload}\r\n                  disabled={isUploading}\r\n                  className=\"instructor-course-upload-btn\"\r\n                >\r\n                  {isUploading ? \"Uploading...\" : \"Upload Video\"}\r\n                </button>\r\n              </div>\r\n              <textarea\r\n                name=\"content_text\"\r\n                placeholder=\"Content Text\"\r\n                value={newContent.content_text}\r\n                onChange={handleInputChange}\r\n              />\r\n              <input\r\n                type=\"number\"\r\n                name=\"duration\"\r\n                placeholder=\"Duration\"\r\n                value={newContent.duration}\r\n                onChange={handleInputChange}\r\n              />\r\n              <input\r\n                type=\"number\"\r\n                name=\"content_order\"\r\n                placeholder=\"Content Order\"\r\n                value={newContent.content_order}\r\n                readOnly\r\n              />\r\n              <button\r\n                type=\"submit\"\r\n                className=\"submit-btn\"\r\n                disabled={isUploading}\r\n              >\r\n                {editingContent ? \"Update Content\" : \"Add Content\"}\r\n              </button>\r\n            </form>\r\n          </section>\r\n        </div>\r\n      </div>\r\n      <Footer />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ManageCourseContent;\r\n","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z\"\n}), 'Delete');"],"names":["createSvgIcon","_jsx","d","ManageCourseContent","_location$state","courseId","useParams","courseContent","setCourseContent","useState","location","useLocation","courseName","setCourseName","state","newContent","setNewContent","title","content_type","content_url","content_text","duration","content_order","editingContent","setEditingContent","videoFile","setVideoFile","isUploading","setIsUploading","useEffect","fetchCourseContent","fetchCourseDetails","async","contentData","axiosInstance","get","concat","data","length","maxOrder","Math","max","map","item","prev","_objectSpread","error","console","response","name","handleInputChange","e","value","target","resetForm","_jsxs","_Fragment","children","Navbar","className","style","textAlign","content","onClick","editContent","EditIcon","delete","contentId","deleteContent","content_id","DeleteIcon","onSubmit","preventDefault","alert","updatedContentData","put","course_id","post","type","placeholder","onChange","required","readOnly","event","files","accept","formData","FormData","append","headers","videoUrl","disabled","Footer"],"sourceRoot":""}