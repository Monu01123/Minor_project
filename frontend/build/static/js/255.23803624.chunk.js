"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[255],{3255:(t,e,n)=>{n.r(e),n.d(e,{default:()=>p});var o=n(9379),r=n(5043),c=n(4204),a=n(3216),s=n(9304),l=(n(4856),n(3768)),i=n(9662),d=n(579);const u=(0,i.A)((0,d.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit");var h=n(6485);const p=()=>{var t;const{courseId:e}=(0,a.g)(),[n,i]=(0,r.useState)([]),p=(0,a.zy)(),[x,m]=(0,r.useState)((null===(t=p.state)||void 0===t?void 0:t.courseName)||""),[j,y]=(0,r.useState)({title:"",content_type:"video",content_url:"",content_text:"",duration:"",content_order:0}),[v,f]=(0,r.useState)(null),[A,g]=(0,r.useState)(null),[_,C]=(0,r.useState)(!1);(0,r.useEffect)((()=>{b(),x||N()}),[e,x]);const b=async()=>{try{const t=(await c.A.get("/api/content/".concat(e))).data;if(i(t),t.length>0){const e=Math.max(...t.map((t=>t.content_order)));y((t=>(0,o.A)((0,o.A)({},t),{},{content_order:e+1})))}else y((t=>(0,o.A)((0,o.A)({},t),{},{content_order:1})))}catch(t){console.error("Error fetching content:",t)}},N=async()=>{try{const t=await c.A.get("/api/courses/".concat(e));m(t.data.name)}catch(t){console.error("Error fetching course details:",t)}},w=t=>{const{name:e,value:n}=t.target;y((0,o.A)((0,o.A)({},j),{},{[e]:n}))},E=()=>{f(null),y({title:"",content_type:"",content_url:"",content_text:"",duration:"",content_order:0}),g(null)};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(s.A,{}),(0,d.jsxs)("div",{className:"manage-course-content",children:[(0,d.jsxs)("h1",{className:"title",children:["Manage Course Content for:",(0,d.jsx)("br",{})," ",(0,d.jsx)("h6",{children:x})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("section",{className:"content-list first-section",children:[(0,d.jsx)("h2",{children:"Content List"}),(0,d.jsx)("ul",{children:0===n.length?(0,d.jsx)("p",{style:{textAlign:"center"},children:"No course content found for this course."}):(0,d.jsx)(d.Fragment,{children:n.map((t=>(0,d.jsxs)("li",{className:"instructor-content-item",children:[(0,d.jsx)("h3",{children:t.title}),(0,d.jsxs)("div",{children:[(0,d.jsx)("button",{onClick:()=>(t=>{f(t),y(t)})(t),className:"instructor-edit-btn",children:(0,d.jsx)(u,{})}),(0,d.jsx)("button",{onClick:()=>(async t=>{try{await c.A.delete("/api/content/".concat(t)),b()}catch(e){console.error("Error deleting content:",e)}})(t.content_id),className:"instructor-delete-btn",children:(0,d.jsx)(l.A,{})})]})]},t.content_id)))})})]}),(0,d.jsxs)("section",{className:"form-section instructor-course-edit",children:[(0,d.jsx)("h2",{children:v?"Edit Content":"Add New Content"}),(0,d.jsxs)("form",{onSubmit:v?async t=>{if(t.preventDefault(),!j.content_url)return void alert("Please upload a new video for the update.");const e=(0,o.A)({},j);try{await c.A.put("/api/content/".concat(v.content_id),e),b(),E()}catch(n){console.error("Error updating content:",n)}}:async t=>{if(t.preventDefault(),!j.content_url)return void alert("Please upload the video first.");const n=(0,o.A)((0,o.A)({},j),{},{course_id:e});try{await c.A.post("/api/content",n),b(),E()}catch(r){console.error("Error creating content:",r)}},className:"content-form",children:[(0,d.jsx)("input",{type:"text",name:"title",placeholder:"Title",value:j.title,onChange:w,required:!0}),(0,d.jsx)("input",{type:"text",name:"content_type",placeholder:"Content Type",value:j.content_type,onChange:w,readOnly:!0}),(0,d.jsxs)("div",{className:"file-upload image-upload-courses-instructor",children:[(0,d.jsx)("input",{type:"file",onChange:t=>{g(t.target.files[0])},accept:"video/*"}),(0,d.jsx)("button",{type:"button",onClick:async()=>{if(!A)return;C(!0);const t=new FormData;t.append("video",A);try{const e=await c.A.post("/api/upload",t,{headers:{"Content-Type":"multipart/form-data"}});y((t=>(0,o.A)((0,o.A)({},t),{},{content_url:e.data.videoUrl}))),C(!1)}catch(e){console.error("Error uploading video:",e),C(!1)}},disabled:_,className:"instructor-course-upload-btn",children:_?"Uploading...":"Upload Video"})]}),(0,d.jsx)("textarea",{name:"content_text",placeholder:"Content Text",value:j.content_text,onChange:w}),(0,d.jsx)("input",{type:"number",name:"duration",placeholder:"Duration",value:j.duration,onChange:w}),(0,d.jsx)("input",{type:"number",name:"content_order",placeholder:"Content Order",value:j.content_order,readOnly:!0}),(0,d.jsx)("button",{type:"submit",className:"submit-btn",disabled:_,children:v?"Update Content":"Add Content"})]})]})]})]}),(0,d.jsx)(h.A,{})]})}},3768:(t,e,n)=>{n.d(e,{A:()=>c});var o=n(9662),r=n(579);const c=(0,o.A)((0,r.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},4856:()=>{}}]);
//# sourceMappingURL=255.23803624.chunk.js.map